<div class="nk-app-root">
    <div class="nk-apps-sidebar">
        <div class="nk-apps-brand">
            <a href="/campaign/list" class="logo-link">n
                <img class="logo-light logo-img" src="~/images/pads4logodiap.png" srcset="~/images/pads4logodiap.png 2x" alt="logo">
                <img class="logo-dark logo-img" src="~/images/pads4logodiap.png" srcset="~/images/pads4logodiap.png 2x" alt="logo-dark">
            </a>
        </div>
        <div class="nk-sidebar-element">
            <div class="nk-sidebar-body">
                <div class="nk-sidebar-content" data-simplebar>
                    <div class="nk-sidebar-menu">
                        <!-- Menu -->
                        <ul class="nk-menu apps-menu">
                            <li class="nk-menu-item" id="managecamp">
                                <a href="/campaign/list" class="nk-menu-link" title="Manage Campaigns">
                                    <span class="nk-menu-icon"><em class="icon ni ni-calendar-booking"></em></span>
                                </a>
                            </li>
                            <li class="nk-menu-item">
                                <a href="html/apps/assets.html" class="nk-menu-link" title="Manage Assets - Network View">
                                    <span class="nk-menu-icon"><em class="icon ni ni-folder-list"></em></span>
                                </a>
                            </li>
                            <li class="nk-menu-item">
                                <a href="html/apps/asset_campaignview.html" class="nk-menu-link" title="Manage Assets - Campaign View">
                                    <span class="nk-menu-icon"><em class="icon ni ni-folders"></em></span>
                                </a>
                            </li>
                            <li class="nk-menu-item">
                                <a href="html/apps/playlist.html" class="nk-menu-link" title="Manage Playlists">
                                    <span class="nk-menu-icon"><em class="icon ni ni-list-index"></em></span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- mains -->
    <div class="nk-main ">
        <!-- wraps -->
        <div class="nk-wrap ">
            <!-- main headers -->
            <div class="nk-header nk-header-fixed is-light">
                <div class="container-fluid">
                    <div class="nk-header-wrap">
                        <div class="nk-menu-trigger d-xl-none ml-n1">
                            <a href="#" class="btn btn-icon btn-sm btn-primary" data-toggle="modal" data-target="#addEventPopup"><em class="icon ni ni-plus"></em></a>
                        </div>
                        <div class="nk-header-app-name">
                            <div class="nk-header-app-info">

                                <div class="nk-header-menu is-light">
                                    <div class="nk-header-menu-inner">
                                        <!-- Menu -->
                                        <ul class="nk-menu nk-menu-main">
                                            <li class="nk-menu-item">
                                                <a href="#" class="nk-menu-link">
                                                    <div class="nk-header-app-logo">
                                                        <em class="icon ni ni-calendar-booking bg-green-dim"></em>
                                                    </div>
                                                    <div class="nk-block-head-content">
                                                        <h3 class="nk-block-title page-title">Campaigns</h3>
                                                    </div>
                                                    <!--<span class="nk-menu-text">ASSETS</span>-->
                                                </a>
                                            </li>
                                            <li><a href="#" class="btn btn-round btn-primary" data-toggle="modal" data-target="#addEventPopup"><em class="icon ni ni-plus"></em><span>New Campaign</span></a></li>

                                            <li class="nk-menu-item has-sub">
                                                <a href="#" class="nk-menu-link nk-menu-toggle">
                                                    <div class="nk-header-app-logo">
                                                        <em class="icon ni ni-network bg-green-dim"></em>
                                                    </div>
                                                    <span class="nk-menu-text">Digital Domiance</span>
                                                </a>
                                                <ul class="nk-menu-sub">
                                                    <li>
                                                        <div id="collapseDVR3">
                                                            <div class="tree ">
                                                                <ul>
                                                                    <li class="handsymbol">
                                                                        <span><i class="fa fa-folder-open"></i> Emaar</span>
                                                                        <ul>
                                                                            <li>
                                                                                <span><i class="fa fa-minus-square"></i> Community</span>
                                                                                <ul>
                                                                                    <li> <span> Demo1 </span> </li>
                                                                                    <li> <span> Demo2 </span> </li>
                                                                                </ul>
                                                                            </li>
                                                                            <li>
                                                                                <span><i class="fa fa-minus-square"></i> Down Town Dubai</span>
                                                                                <ul>
                                                                                    <li> <span> Demo1 </span> </li>
                                                                                    <li> <span> Demo2 </span> </li>
                                                                                </ul>
                                                                            </li>
                                                                            <li>
                                                                                <span><i class="fa fa-minus-square"></i> The Dubai Mall</span>
                                                                                <ul>
                                                                                    <li> <span> Digital Dominance</span> </li>
                                                                                    <li> <span> Metro </span> </li>
                                                                                </ul>
                                                                            </li>
                                                                        </ul>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>

                                                    </li>
                                                </ul><!-- .nk-menu-sub -->
                                            </li><!-- .nk-menu-item -->
                                        </ul>
                                        <!-- Menu -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="nk-header-tools">
                            <ul class="nk-quick-nav">
                                <li class="dropdown list-apps-dropdown d-lg-none">
                                    <a href="#" class="dropdown-toggle nk-quick-nav-icon" data-toggle="dropdown">
                                        <div class="icon-status icon-status-na"><em class="icon ni ni-network"></em></div>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                                        <div class="dropdown-body">
                                            <div id="collapseDVR3">
                                                <div class="tree ">
                                                    <ul>
                                                        <li class="handsymbol">
                                                            <span><i class="fa fa-folder-open"></i> Emaar</span>
                                                            <ul>
                                                                <li>
                                                                    <span><i class="fa fa-minus-square"></i> Community</span>
                                                                    <ul>
                                                                        <li> <span> Demo1 </span> </li>
                                                                        <li> <span> Demo2 </span> </li>
                                                                    </ul>
                                                                </li>
                                                                <li>
                                                                    <span><i class="fa fa-minus-square"></i> Down Town Dubai</span>
                                                                    <ul>
                                                                        <li> <span> Demo1 </span> </li>
                                                                        <li> <span> Demo2 </span> </li>
                                                                    </ul>
                                                                </li>
                                                                <li>
                                                                    <span><i class="fa fa-minus-square"></i> The Dubai Mall</span>
                                                                    <ul>
                                                                        <li> <span> Digital Dominance</span> </li>
                                                                        <li> <span> Metro </span> </li>
                                                                    </ul>
                                                                </li>
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li class="dropdown chats-dropdown hide-mb-xs">
                                    <a href="#" class="dropdown-toggle nk-quick-nav-icon" data-toggle="dropdown">
                                        <div class="icon-status icon-status-na"><em class="icon ni ni-setting"></em></div>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-md dropdown-menu-right">
                                        <div class="dropdown-inner">
                                            <ul class="link-list">
                                                <li><a href="#"><em class="icon ni ni-network"></em><span>Network Settings</span></a></li>
                                                <li><a href="#"><em class="icon ni ni-play-circle"></em><span>Player Settings</span></a></li>
                                                <li><a href="#"><em class="icon ni ni-activity-alt"></em><span>General Configurations</span></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                                <li class="dropdown notification-dropdown">
                                    <a href="#" class="dropdown-toggle nk-quick-nav-icon" data-toggle="dropdown">
                                        <div class="icon-status icon-status-info"><em class="icon ni ni-bell"></em></div>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-xl dropdown-menu-right">
                                        <div class="dropdown-head">
                                            <span class="sub-title nk-dropdown-title">Notifications</span>
                                            <a href="#">Mark All as Read</a>
                                        </div>
                                        <div class="dropdown-body">
                                            <div class="nk-notification">
                                                <div class="nk-notification-item dropdown-inner">
                                                    <div class="nk-notification-icon">
                                                        <em class="icon icon-circle bg-primary-dim ni ni-share"></em>
                                                    </div>
                                                    <div class="nk-notification-content">
                                                        <div class="nk-notification-text">Iliash shared <span>Dashlite-v2</span> with you.</div>
                                                        <div class="nk-notification-time">Just now</div>
                                                    </div>
                                                </div>
                                                <div class="nk-notification-item dropdown-inner">
                                                    <div class="nk-notification-icon">
                                                        <em class="icon icon-circle bg-info-dim ni ni-edit"></em>
                                                    </div>
                                                    <div class="nk-notification-content">
                                                        <div class="nk-notification-text">Iliash <span>invited</span> you to edit <span>DashLite</span> folder</div>
                                                        <div class="nk-notification-time">2 hrs ago</div>
                                                    </div>
                                                </div>
                                                <div class="nk-notification-item dropdown-inner">
                                                    <div class="nk-notification-icon">
                                                        <em class="icon icon-circle bg-primary-dim ni ni-share"></em>
                                                    </div>
                                                    <div class="nk-notification-content">
                                                        <div class="nk-notification-text">You have shared <span>project v2</span> with Parvez.</div>
                                                        <div class="nk-notification-time">7 days ago</div>
                                                    </div>
                                                </div>
                                                <div class="nk-notification-item dropdown-inner">
                                                    <div class="nk-notification-icon">
                                                        <em class="icon icon-circle bg-success-dim ni ni-spark"></em>
                                                    </div>
                                                    <div class="nk-notification-content">
                                                        <div class="nk-notification-text">Your <span>Subscription</span> renew successfully.</div>
                                                        <div class="nk-notification-time">2 month ago</div>
                                                    </div>
                                                </div>
                                            </div><!-- .nk-notification -->
                                        </div><!-- .nk-dropdown-body -->
                                        <div class="dropdown-foot center">
                                            <a href="#">View All</a>
                                        </div>
                                    </div>
                                </li>
                                <li class="dropdown list-apps-dropdown d-lg-none">
                                    <a href="#" class="dropdown-toggle nk-quick-nav-icon" data-toggle="dropdown">
                                        <div class="icon-status icon-status-na"><em class="icon ni ni-menu-circled"></em></div>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                                        <div class="dropdown-body">
                                            <ul class="list-apps">
                                                <li>
                                                    <a href="html/apps/campaign.html">
                                                        <span class="list-apps-media"><em class="icon ni ni-calendar-booking bg-primary text-white"></em></span>
                                                        <span class="list-apps-title">Manage Campaigns</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="html/apps/assets.html">
                                                        <span class="list-apps-media"><em class="icon ni ni-folder-list bg-info-dim"></em></span>
                                                        <span class="list-apps-title">Manage Assets - Network View</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="html/apps/asset_campaignview.html">
                                                        <span class="list-apps-media"><em class="icon ni ni-folders bg-purple-dim"></em></span>
                                                        <span class="list-apps-title">Manage Assets - Campaign View</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="html/apps/playlist.html">
                                                        <span class="list-apps-media"><em class="icon ni ni-list-index bg-purple-dim"></em></span>
                                                        <span class="list-apps-title">Manage Playlists</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div><!-- .nk-dropdown-body -->
                                    </div>
                                </li>
                                <li class="dropdown user-dropdown">
                                    <a href="#" class="dropdown-toggle mr-n1" data-toggle="dropdown">
                                        <div class="user-toggle">
                                            <div class="user-avatar sm">
                                                <em class="icon ni ni-user-alt"></em>
                                            </div>
                                        </div>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-md dropdown-menu-right">
                                        <div class="dropdown-inner user-card-wrap bg-lighter d-none d-md-block">
                                            <div class="user-card">
                                                <div class="user-avatar">
                                                    <span>AB</span>
                                                </div>
                                                <div class="user-info">
                                                    <span class="lead-text">Abu Bin Ishtiyak</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropdown-inner">
                                            <ul class="link-list">
                                                <li><a href="#"><em class="icon ni ni-user-alt"></em><span>View Profile</span></a></li>
                                                <li><a href="#"><em class="icon ni ni-setting-alt"></em><span>Account Setting</span></a></li>
                                                <li><a href="#"><em class="icon ni ni-activity-alt"></em><span>Login Activity</span></a></li>
                                                <li><a class="dark-switch" href="#"><em class="icon ni ni-moon"></em><span>Dark Mode</span></a></li>
                                            </ul>
                                        </div>
                                        <div class="dropdown-inner">
                                            <ul class="link-list">
                                                <li><a href="#"><em class="icon ni ni-signout"></em><span>Sign out</span></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- main header e -->
            <!-- content s -->
            <div class="nk-content p-0">
                <div class="nk-content-inner">
                    <div class="nk-content-body">
                        <div class="nk-block">
                            <div class="card mt-0">
                                <div class="card-inner">
                                    @*Start of scheduler controller*@
                                    <ejs-schedule id="schedule" width="100%" height="650px" popupOpen="onPopupOpen" editorTemplate="#EventEditorTemplate" currentView="TimelineYear">
                                        <e-schedule-views>
                                            <e-schedule-view option="TimelineYear" orientation="Vertical" displayName="Year" isSelected="true">
                                                <e-schedule-view-group enableCompactView="true" resources="@ViewBag.Resources"></e-schedule-view-group>
                                            </e-schedule-view>
                                            <e-schedule-view option="TimelineMonth" orientation="Vertical" displayName="Month">
                                                <e-schedule-view-group resources="@ViewBag.Resources"></e-schedule-view-group>
                                            </e-schedule-view>
                                            <e-schedule-view option="TimelineWeek" orientation="Vertical" displayName="Week">
                                                <e-schedule-view-group resources="@ViewBag.Resources"></e-schedule-view-group>
                                            </e-schedule-view>
                                            <e-schedule-view option="TimelineDay" orientation="Vertical" displayName="Day">
                                                <e-schedule-view-group resources="@ViewBag.Resources"></e-schedule-view-group>
                                            </e-schedule-view>
                                        </e-schedule-views>
                                        <e-schedule-resources>
                                            <e-schedule-resource dataSource="@ViewBag.Categories" field="TaskId" title="Category" name="Categories" textField="text" idField="id" groupIDField='groupId' colorField="color" allowMultiple="true"></e-schedule-resource>
                                        </e-schedule-resources>
                                        <e-schedule-eventsettings dataSource="@ViewBag.datasource">
                                        </e-schedule-eventsettings>
                                    </ejs-schedule>
                                    <script id="EventEditorTemplate" type="text/template">
                                        <table class="custom-event-editor" width="100%" cellpadding="5">
                                            <tbody>
                                                <tr>
                                                    <td class="e-textlabel">Summary</td>
                                                    <td colspan="4">
                                                        <input id="Subject" class="e-field e-input" type="text" value="" name="Subject" style="width: 100%" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="e-textlabel">Status</td>
                                                    <td colspan="4">
                                                        <input type="text" id="EventType" name="EventType" class="e-field" style="width: 100%" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="e-textlabel">From</td>
                                                    <td colspan="4">
                                                        <input id="StartTime" class="e-field" type="text" name="StartTime" />
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td class="e-textlabel">To</td>
                                                    <td colspan="4">
                                                        <input id="EndTime" class="e-field" type="text" name="EndTime" />
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>

                                    </script>
                                    <script type="text/javascript">
                                        function onPopupOpen(args) {
                                            if (args.type === 'Editor') {
                                                $(args.element).find('.e-title-text').text("Edit Campaign");
                                                $(args.element).find('.e-event-delete').css("display", "none");

                                                var statusElement = args.element.querySelector('#EventType');
                                                if (!statusElement.classList.contains('e-dropdownlist')) {
                                                    var dropDownListObject = new ej.dropdowns.DropDownList({
                                                        placeholder: 'Choose status', value: statusElement.value,
                                                        dataSource: ['New', 'Requested', 'Confirmed']
                                                    });
                                                    dropDownListObject.appendTo(statusElement);
                                                    statusElement.setAttribute('name', 'EventType');
                                                }

                                                var startElement = args.element.querySelector('#StartTime');
                                                if (!startElement.classList.contains('e-datetimepicker')) {
                                                    new ej.calendars.DateTimePicker({ value: new Date(startElement.value) || new Date() }, startElement);
                                                }

                                                var endElement = args.element.querySelector('#EndTime');
                                                if (!endElement.classList.contains('e-datetimepicker')) {
                                                    new ej.calendars.DateTimePicker({ value: new Date(endElement.value) || new Date() }, endElement);
                                                }

                                                $(args.element).find(".e-event-save").off("click").on("click", function () {
                                                    console.log("hello world!!!");
                                                });
                                            }
                                            else if (args.type === 'QuickInfo') {
                                                sessionStorage.setItem("selectedCampaign", JSON.stringify(args.data));
                                                $(args.element).find('.e-delete, .e-event-delete').css("display", "none");
                                                var btnDuplicate = $('<button></button>').attr({ type: 'button', title: 'Duplicate', class: 'e-duplicate e-icons e-btn e-lib e-flat e-round e-small e-icon-btn' });
                                                $(btnDuplicate).append($('<span></span>').attr({ class: 'e-btn-icon e-icons e-copy-icon'}));
                                                $(args.element).find(".e-delete").after(btnDuplicate);
                                            }
                                        }

                                        $(document).off("click", ".e-duplicate").on("click", ".e-duplicate", function () {
                                            var data = JSON.parse(sessionStorage.getItem("selectedCampaign"));
                                            initDuplicateDate(data);
                                            $(".e-duplicate-campaign-dialog").css("display", "flex");
                                            $(".e-duplicate-campaign-dialog .e-dlg-duplicate").removeClass("e-popup-close").addClass("e-popup-open");
                                        });
                                    </script>

                                    @*End of schduler controller*@
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- contente -->
        </div>
        <!-- wrape -->
    </div>
    <!-- maine -->
</div>

<partial name="_NewCampaign" />

<partial name="_DuplicateCampaign" />